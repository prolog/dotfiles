; Code to check what a characters base resists/vulns are.
; This is done by race, and the values indicated have both
; regular/modified attributes for the BP of magic resistance
; (which is ubiquitous among non-newbies)

/def getresists = 0
/def check = /set getresists=1 %; finger %{1} %;
/def getresists = /if (%{1} =~ "Human") gt @W%{2} (%{1})@Y. @RVulns: None@Y; @GResists: None@Y %; /elseif (%{1} =~ "Dwarf") gt @W%{2} (%{1})@Y. @RVulns: Water (-76/-51), Air (-28/-3)@Y; @GResists: Bash (12), Earth (61/86), Magic (21/46)@Y %; /elseif (%{1} =~ "Elf") gt @W%{2} (%{1})@Y. @RVulns: Bash (-12), Negative (-35/-10)@Y; @GResists: Disease (17), Light (29/54)@Y %; /elseif (%{1} =~ "Giant") gt @W%{2} (%{1})@Y. @RVulns: Mental (-71/46), Sonic (-31/-6)@Y; @GResists: Earth (14/39), Cold (41/66), Fire (43/68)@Y %; /elseif (%{1} =~ "Halfling") gt @W%{2} (%{1})@Y. @RVulns: Water (-29/-4)@Y; @GResists: Bash (14), Poison (19), Mental (41/66)@Y %; /elseif (%{1} =~ "Half-griffon") gt @W%{2} (%{1})@Y. @RVulns: Bash (-57)@Y; @GResists: Mental (31/56), Air (33/58)@Y %; /elseif (%{1} =~ "Troll") gt @W%{2} (%{1})@Y. @RVulns: Acid (-93/-68), Fire (-54/-29)@Y; @GResists: Earth (18/43), Bash (24), Pierce (27), Slash (28)@Y %; /elseif (%{1} =~ "Sprite") gt @W%{2} (%{1})@Y. @RVulns: Acid (-32/-7), Bash (-4), Slash (-4)@Y; @GResists: Magic (41/66), Mental (18/43)@Y %; /elseif (%{1} =~ "Quickling") gt @W%{2} (%{1})@Y. @RVulns: Magic (-37/-12)@Y; @GResists: Sonic (11/36), Energy (34/69)@Y %; /elseif (%{1} =~ "Dark") gt @W%{2} (Dark Elf)@Y. @RVulns: Light (-59/-34), Holy (-34/-9)@Y; @GResists: Disease (7), Poison (9), Shadow (31/56), Negative (39/64)@Y %; /elseif (%{1} =~ "Centaur") gt @W%{2} (%{1})@Y. @RVulns: Bash (-19)@Y; @GResists: Pierce (29/54)@Y %; /elseif (%{1} =~ "Vampire") gt @W%{2} (%{1})@Y. @RVulns: Light (-91/66), Holy (-40/-15), Fire (-32/-7)@Y; @GResists: Cold (17/42), Poison (19), Disease (29), Shadow (31/56), Negative (54/79)@Y %; /elseif (%{1} =~ "Wolfen") gt @W%{2} (%{1})@Y.@ @RVulns: Fire (-38/-13)@Y; @GResists: Slash (13), Disease (21), Cold (34/59)@Y %; /elseif (%{1} =~ "Ratling") gt @W%{2} (%{1})@Y. @RVulns: Bash (-29), Mental (-37/-13), Negative (-33/-8)@Y; @GResists: Acid (19/44), Poison(25), Disease (51)@Y %; /elseif (%{1} =~ "Diva") gt @W%{2} (%{1})@Y. @RVulns: Cold (-51/-26), Fire (-35/-10)@Y; @GResists: Poison/Disease (6), Slash (33), Earth (60/85)@Y %; /elseif (%{1} =~ "Shadow") gt @W%{2} (%{1})@Y. @RVulns: Light (-102/-77), Air (-39/-14)@Y; @GResists: Bash (6), Pierce (7), Negative (27/52), Shadow (68/93)@Y %; /elseif (%{1} =~ "Triton") gt @W%{2} (%{1})@Y. @RVulns: Lightning (-75/-50)@Y; @GResists: Cold (34/59), Water (62/87)@Y %; /elseif (%{1} =~ "Lizardman") gt @W%{2} (%{1})@Y. @RVulns: Cold (-58/-33), Air (-39/-14), Pierce (-13)@Y; @GResists: Fire (14/39), Acid (34/59), Poison (58)@Y %; /elseif (%{1} =~ "Eldar") gt @W%{2} (%{1})@Y. @RVulns: Slash (-42), Disease (-29)@Y; @GResists: All magics (7/32) except Poison (-23)@Y %; /endif
            

/def -mregexp -t"Player : ([^ ])" name = /set name %{4}
/def -mregexp -t"^Level [0-9]+ (male|female) ([^ ])" playerinfo = /if (getresists == 1) /set getresists=0 %; /getresists %{4} %{name} %; /set getresists=0 %; /endif
